(()=>{"use strict";class e{static startDebugLogging(){null===this.debugInterval&&(console.log("Starting GoogleDocsAPI debug logging"),this.debugInterval=window.setInterval((()=>{var e;const t=Date.now();if(t-this.lastDebugTime>5e3){this.lastDebugTime=t;const n=this.isInGoogleDocs(),o=document.querySelectorAll(".kix-paragraphrenderer");if(console.log(`[GoogleDocsAPI Debug] isInGoogleDocs: ${n}`),console.log(`[GoogleDocsAPI Debug] paragraphs found: ${(null==o?void 0:o.length)||0}`),o&&o.length>0){const t=null===(e=o[0].textContent)||void 0===e?void 0:e.substring(0,50);console.log(`[GoogleDocsAPI Debug] First paragraph starts with: ${t}...`)}}}),1e3))}static stopDebugLogging(){null!==this.debugInterval&&(window.clearInterval(this.debugInterval),this.debugInterval=null,console.log("Stopped GoogleDocsAPI debug logging"))}static isInGoogleDocs(){try{return"docs.google.com"===window.location.hostname&&(null!==document.querySelector(".kix-paragraphrenderer")||null!==document.querySelector(".docs-editor"))}catch(e){return console.error("Error checking if in Google Docs:",e),!1}}static getDocumentContent(e=3){try{if(console.log("Attempting to retrieve document content..."),!this.isInGoogleDocs())return console.error("Not in a Google Docs document"),"";const t=document.querySelectorAll(".kix-paragraphrenderer");if(!t||0===t.length){if(console.error("Could not find paragraph elements in document, DOM might not be ready"),this.startDebugLogging(),e>0){console.log(`Trying alternative selectors (${e} retries left)`);const t=[".kix-page-content-wrapper",".docs-texteventtarget-iframe",".docs-editor-container"];for(const e of t){const t=document.querySelectorAll(e);if(t&&t.length>0){console.log(`Found ${t.length} elements with selector ${e}`);const n=Array.from(t).map((e=>e.textContent)).filter(Boolean).join("\n");if(n)return console.log(`Retrieved ${n.length} characters using alternative selector`),n}}return new Promise((t=>{setTimeout((()=>{t(this.getDocumentContent(e-1))}),500)}))}return""}const n=Array.from(t).map((e=>e.textContent)).join("\n");return n?this.stopDebugLogging():(console.warn("Document content appears to be empty"),this.startDebugLogging()),console.log(`Retrieved ${n.length} characters from document`),n}catch(e){return console.error("Error getting document content:",e),this.startDebugLogging(),""}}static forceGetDocumentContent(){try{console.log("Attempting forced document content retrieval...");try{const e=document.createElement("script");e.textContent='\n                    try {\n                        // Try to access Google Docs internal data\n                        if (window.IS_INTEGRATION_ADAPTER_RUNNING__) {\n                            // Store document text in a global variable\n                            window.vibeWriteExtractedContent = document.body.innerText || document.documentElement.innerText;\n                            console.log("Document content extracted by injected script");\n                        }\n                    } catch(e) {\n                        console.error("Injected script error:", e);\n                    }\n                ',document.head.appendChild(e),setTimeout((()=>{document.head.removeChild(e)}),500);const t=window.vibeWriteExtractedContent;if(t&&t.length>100)return console.log(`Retrieved ${t.length} characters via injected script`),t}catch(e){console.error("Script injection approach failed:",e)}const e=[".kix-paragraphrenderer",".kix-page-content-wrapper",".docs-editor-container",".kix-appview-editor",".docs-texteventtarget-iframe",".kix-canvas-tile-content",".goog-inline-block.kix-lineview-text-block","[contenteditable='true']",".docs-text-ui-cursor-blink",".kix-canvas-tile-content",".goog-inline-block"];for(const t of e){const e=document.querySelectorAll(t);if(e&&e.length>0){console.log(`Found ${e.length} elements with selector ${t}`);const n=Array.from(e).map((e=>e.textContent)).filter(Boolean).join("\n");if(n)return console.log(`Retrieved ${n.length} characters using selector ${t}`),n}}const t=document.body.textContent;return t&&t.length>100?(console.log(`Retrieved ${t.length} characters from document.body.textContent`),t):(console.error("Forced document content retrieval failed - no content found"),"")}catch(e){return console.error("Error in forced document content retrieval:",e),""}}static getSelectedText(){try{if(window.getSelection){const e=window.getSelection();if(e)return e.toString()}return""}catch(e){return console.error("Error getting selected text:",e),""}}static addComment(e){try{if(!this.getSelectedText())return console.warn("No text selected to add a comment to"),!1;const t=document.querySelector('[aria-label="Add comment"]');return t&&(t.click(),setTimeout((()=>{var t,n;const o=document.querySelector(".docos-input-textarea");o&&(null===(n=null===(t=Object.getOwnPropertyDescriptor(HTMLTextAreaElement.prototype,"value"))||void 0===t?void 0:t.set)||void 0===n||n.call(o,e),o.dispatchEvent(new Event("input",{bubbles:!0})),setTimeout((()=>{const e=Array.from(document.querySelectorAll("button")).find((e=>"Comment"===e.textContent));if(e)return e.click(),!0}),300))}),500)),!1}catch(e){return console.error("Error adding comment:",e),!1}}static isGoogleDocsUrl(e){return e.startsWith("https://docs.google.com/document/")}static getDocumentTitle(){try{const e=document.querySelector(".docs-title-input");return e&&e.textContent||"Untitled Document"}catch(e){return console.error("Error getting document title:",e),"Untitled Document"}}}e.debugInterval=null,e.lastDebugTime=0;function t(){var e;try{const t=document.createElement("div");t.className="vibewrite-sidebar-container",t.id="vibewrite-sidebar",document.body.appendChild(t),c("Sidebar container created and added to DOM",{id:t.id,className:t.className,parentElement:null===(e=t.parentElement)||void 0===e?void 0:e.tagName});const i=document.createElement("iframe");i.id="vibewrite-sidebar-iframe",i.style.width="100%",i.style.height="100%",i.style.border="none",i.allow="clipboard-read; clipboard-write",i.src=chrome.runtime.getURL("sidebar.html"),t.appendChild(i),window.vibeWriteSidebarIframe=i,i.addEventListener("load",(()=>{var e;c("Sidebar iframe loaded",{src:i.src,hasContentWindow:!!i.contentWindow,readyState:(null===(e=i.contentDocument)||void 0===e?void 0:e.readyState)||"unknown"}),i.contentWindow&&i.contentWindow.postMessage({type:"SIDEBAR_READY"},"*")}));const s=document.querySelector(".docs-titlebar-buttons");if(s){const e=document.createElement("div");e.className="vibewrite-toolbar",e.style.display="inline-flex",e.style.alignItems="center";const t=document.createElement("button");t.className="vibewrite-button",t.textContent="VibeWrite",t.style.backgroundColor="#1a73e8",t.style.color="white",t.style.padding="8px 12px",t.style.border="none",t.style.borderRadius="4px",t.style.cursor="pointer",t.style.marginRight="10px",t.addEventListener("click",n);const i=document.createElement("button");i.className="vibewrite-button",i.textContent="Analyze",i.addEventListener("click",o);const a=document.createElement("button");a.className="vibewrite-button",a.textContent="Add Feedback",a.addEventListener("click",r),e.appendChild(t),e.appendChild(i),e.appendChild(a),s.insertBefore(e,s.firstChild),c("VibeWrite UI added successfully")}}catch(e){c("Error adding VibeWrite UI:",e)}}function n(){let e=document.getElementById("vibewrite-sidebar");if(!e){c("Sidebar not found, creating it first");try{t(),e=document.getElementById("vibewrite-sidebar"),c("Sidebar created successfully:",e)}catch(e){c("Error creating sidebar:",e),alert("VibeWrite: Could not create sidebar. Please reload the page and try again.")}}if(e){const t=e.classList.contains("open");return e.classList.toggle("open"),c("Sidebar "+(t?"closed":"opened")),e.style.display="none",e.offsetHeight,e.style.display="flex",!0}return c("Failed to find or create sidebar"),!1}function o(){document.getElementById("vibewrite-sidebar")||(c("Sidebar not found, creating it first"),t());const e=document.getElementById("vibewrite-sidebar");e&&!e.classList.contains("open")&&(e.classList.add("open"),e.style.display="none",e.offsetHeight,e.style.display="flex");const n=document.getElementById("vibewrite-sidebar-iframe");(null==n?void 0:n.contentWindow)?(c("Sending ANALYZE_DOCUMENT to sidebar iframe"),n.contentWindow.postMessage({type:"ANALYZE_DOCUMENT"},"*")):(c("Could not find sidebar iframe, trying broadcast"),window.postMessage({type:"ANALYZE_DOCUMENT",source:"content-script"},"*"),chrome.runtime.sendMessage({type:"ANALYZE_DOCUMENT"}))}function r(){const t=e.getSelectedText();if(!t)return void alert("Please select some text to give feedback on.");const n=document.getElementById("vibewrite-sidebar");n&&!n.classList.contains("open")&&n.classList.add("open"),chrome.runtime.sendMessage({type:"CHAT_REQUEST",payload:{message:`Please review and improve the following text: "${t}"`,selectedText:t}})}function i(e){c("Attempting to post message to sidebar:",e);const t=document.querySelector("#vibewrite-sidebar iframe");if(null==t?void 0:t.contentWindow)return c("Found iframe inside sidebar container, posting message"),void t.contentWindow.postMessage(e,"*");const n=document.querySelector("#vibewrite-sidebar");if(null==n?void 0:n.contentWindow)return c("Found sidebar container with contentWindow, posting message"),void n.contentWindow.postMessage(e,"*");const o=[".vibewrite-sidebar-container iframe",".vibewrite-sidebar","iframe[src*='sidebar.html']","iframe"];for(const t of o){const n=document.querySelector(t);if(null==n?void 0:n.contentWindow)return c(`Found element using fallback selector "${t}", posting message`),void n.contentWindow.postMessage(e,"*")}c("Could not find sidebar iframe, broadcasting message"),window.parent&&window.parent!==window&&(c("Broadcasting message to parent window"),window.parent.postMessage(e,"*")),window.top&&window.top!==window&&window.top!==window.parent&&(c("Broadcasting message to top window"),window.top.postMessage(e,"*")),c("Could not find any suitable target for message")}function c(t,...n){const o=(new Date).toISOString().slice(11,19);console.log(`[VibeWrite Debug ${o}] ${t}:`,...n),t.includes("document content")&&function(){try{const t=document.querySelector("#vibewrite-sidebar"),n=document.querySelector("#vibewrite-sidebar iframe"),o=document.querySelectorAll(".kix-paragraphrenderer");c("DOM State",{url:window.location.href,isGoogleDocs:"docs.google.com"===window.location.hostname,sidebarExists:!!t,sidebarIframeExists:!!n,paragraphCount:o.length,bodyChildCount:document.body.childElementCount,hasEditorElement:!!document.querySelector(".docs-editor-container")});const r=e.getDocumentContent(),i=e.forceGetDocumentContent();c("Content Retrieval Test",{standardContentWorks:!!r,standardContentLength:(null==r?void 0:r.length)||0,forcedContentWorks:!!i,forcedContentLength:(null==i?void 0:i.length)||0})}catch(e){console.error("Error logging DOM state:",e)}}()}window.vibeWriteInjected?console.log("VibeWrite already injected, skipping..."):(window.vibeWriteInjected=!0,console.log("VibeWrite content script loaded"),window.addEventListener("load",(function(){return o=this,r=void 0,a=function*(){console.log("Initializing VibeWrite..."),e.isInGoogleDocs()?(yield function(e,t=1e4){return new Promise(((n,o)=>{const r=Date.now();!function i(){const c=document.querySelector(e);c?n(c):Date.now()-r>t?o(new Error(`Timeout waiting for element: ${e}`)):setTimeout(i,100)}()}))}(".docs-titlebar-buttons"),function(){c("Starting document content monitoring..."),e.startDebugLogging();let t=0;const n=setInterval((()=>{t++;try{const o=e.getDocumentContent();o?(c(`Document content monitoring: Content accessible (${o.length} chars)`),clearInterval(n),e.stopDebugLogging()):c(`Document content monitoring: No content available (check ${t}/20)`)}catch(e){c("Document content monitoring: Error accessing content",e)}t>=20&&(c("Document content monitoring: Max checks reached, stopping monitoring"),clearInterval(n))}),3e3)}(),t(),c("Setting up message handlers..."),chrome.runtime.onMessage.addListener(((t,o,r)=>{switch(c("Content script received message:",t),t.type){case"ANALYZE_DOCUMENT":c("Received ANALYZE_DOCUMENT message"),i({type:"ANALYZE_DOCUMENT"}),r({success:!0});break;case"GET_DOCUMENT_CONTENT":c("Received GET_DOCUMENT_CONTENT message from chrome.runtime");let o=e.getDocumentContent();o||(c("Standard retrieval failed, trying forced method..."),o=e.forceGetDocumentContent()),r({success:!!o,data:{content:o||""},error:o?void 0:"Could not retrieve document content"});break;case"GET_DOCUMENT_CONTENT_RELAY":console.log("Content script received relay request from background");try{const t=e.forceGetDocumentContent();c("Got document content via relay",{contentLength:(null==t?void 0:t.length)||0}),window.postMessage({type:"DOCUMENT_CONTENT_RESPONSE",content:t||"",source:"content-relay"},"*");const n=document.getElementById("vibewrite-sidebar-iframe");(null==n?void 0:n.contentWindow)&&n.contentWindow.postMessage({type:"DOCUMENT_CONTENT_RESPONSE",content:t||"",source:"content-direct"},"*"),r({success:!0})}catch(e){console.error("Error relaying document content:",e),r({success:!1,error:"Failed to relay document content"})}break;case"TOGGLE_SIDEBAR":c("Toggling sidebar visibility"),n(),r({success:!0});break;default:c("Unknown message type:",t.type),r({success:!1,error:"Unknown message type"})}return!0})),window.addEventListener("message",(t=>{c("Content script received window message:",t.data,"Source:",t.source);const n=document.querySelector("#vibewrite-sidebar");if(c("Sidebar iframe element:",n,"with contentWindow:",null==n?void 0:n.contentWindow),t.source===(null==n?void 0:n.contentWindow)||c("Message not from sidebar iframe, but processing anyway for debugging"),t.data&&"GET_DOCUMENT_CONTENT"===t.data.type){c("Processing GET_DOCUMENT_CONTENT request from sidebar");try{let t=e.getDocumentContent();if(t||(c("Standard content retrieval failed, trying forced method..."),t=e.forceGetDocumentContent()),!t)return c("Trying delayed retrieval as last resort..."),void setTimeout((()=>{i({type:"DOCUMENT_CONTENT_RESPONSE",content:e.forceGetDocumentContent()||"Empty document or content cannot be accessed"})}),1e3);i({type:"DOCUMENT_CONTENT_RESPONSE",content:t||""}),c(`Sent document content to sidebar (${(null==t?void 0:t.length)||0} characters)`)}catch(t){c("Error getting document content:",t);try{const t=e.forceGetDocumentContent();if(t)return i({type:"DOCUMENT_CONTENT_RESPONSE",content:t}),void c(`Sent emergency document content to sidebar (${t.length} characters)`)}catch(e){c("Emergency content retrieval also failed:",e)}i({type:"DOCUMENT_CONTENT_RESPONSE",error:"Failed to retrieve document content"})}}else if(t.data&&"GET_SELECTED_TEXT"===t.data.type){c("Processing GET_SELECTED_TEXT request from sidebar");try{const t=e.getSelectedText();i({type:"SELECTED_TEXT_RESPONSE",text:t||""}),c(`Sent selected text to sidebar (${(null==t?void 0:t.length)||0} characters)`)}catch(e){c("Error getting selected text:",e),i({type:"SELECTED_TEXT_RESPONSE",text:"",error:"Failed to retrieve selected text"})}}}))):console.log("Not in a Google Docs document, exiting...")},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function i(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var o;t.done?e(t.value):(o=t.value,o instanceof s?o:new s((function(e){e(o)}))).then(n,i)}c((a=a.apply(o,r||[])).next())}));var o,r,s,a})))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBV0EsRUFBUTBKLEVBQVEsS0FJakJNLEtBQUtQLEVBQVdJLEVBQVcsQ0FDN0dGLEdBQU14QixFQUFZQSxFQUFVOEIsTUFBTWhDLEVBQVNDLEdBQWMsS0FBSzBCLE9BQ2xFLElBUHdDLElBQVUzQixFQUFTQyxFQUFZc0IsRUFBR3JCLENBc0M5RSxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmliZXdyaXRlLy4vc3JjL3V0aWxzL2dvb2dsZS1kb2NzLWFwaS50cyIsIndlYnBhY2s6Ly92aWJld3JpdGUvLi9zcmMvY29udGVudC9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBBUEkgZm9yIGludGVyYWN0aW5nIHdpdGggR29vZ2xlIERvY3NcbmV4cG9ydCBjbGFzcyBHb29nbGVEb2NzQVBJIHtcbiAgICAvKipcbiAgICAgKiBTdGFydCBwZXJpb2RpYyBsb2dnaW5nIG9mIGRvY3VtZW50IHN0YXRlXG4gICAgICovXG4gICAgc3RhdGljIHN0YXJ0RGVidWdMb2dnaW5nKCkge1xuICAgICAgICAvLyBEb24ndCBzdGFydCBtdWx0aXBsZSBkZWJ1ZyBpbnRlcnZhbHNcbiAgICAgICAgaWYgKHRoaXMuZGVidWdJbnRlcnZhbCAhPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc29sZS5sb2coXCJTdGFydGluZyBHb29nbGVEb2NzQVBJIGRlYnVnIGxvZ2dpbmdcIik7XG4gICAgICAgIHRoaXMuZGVidWdJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgLy8gT25seSBsb2cgZXZlcnkgNSBzZWNvbmRzIGF0IG1vc3QgdG8gYXZvaWQgc3BhbW1pbmcgdGhlIGNvbnNvbGVcbiAgICAgICAgICAgIGlmIChub3cgLSB0aGlzLmxhc3REZWJ1Z1RpbWUgPiA1MDAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0RGVidWdUaW1lID0gbm93O1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzSW5Eb2NzID0gdGhpcy5pc0luR29vZ2xlRG9jcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFncmFwaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmtpeC1wYXJhZ3JhcGhyZW5kZXJlclwiKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0dvb2dsZURvY3NBUEkgRGVidWddIGlzSW5Hb29nbGVEb2NzOiAke2lzSW5Eb2NzfWApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbR29vZ2xlRG9jc0FQSSBEZWJ1Z10gcGFyYWdyYXBocyBmb3VuZDogJHsocGFyYWdyYXBocyA9PT0gbnVsbCB8fCBwYXJhZ3JhcGhzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhZ3JhcGhzLmxlbmd0aCkgfHwgMH1gKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyYWdyYXBocyAmJiBwYXJhZ3JhcGhzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3RQYXJhID0gKF9hID0gcGFyYWdyYXBoc1swXS50ZXh0Q29udGVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN1YnN0cmluZygwLCA1MCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbR29vZ2xlRG9jc0FQSSBEZWJ1Z10gRmlyc3QgcGFyYWdyYXBoIHN0YXJ0cyB3aXRoOiAke2ZpcnN0UGFyYX0uLi5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDEwMDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wIHBlcmlvZGljIGxvZ2dpbmdcbiAgICAgKi9cbiAgICBzdGF0aWMgc3RvcERlYnVnTG9nZ2luZygpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVidWdJbnRlcnZhbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5kZWJ1Z0ludGVydmFsKTtcbiAgICAgICAgICAgIHRoaXMuZGVidWdJbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlN0b3BwZWQgR29vZ2xlRG9jc0FQSSBkZWJ1ZyBsb2dnaW5nXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHdlJ3JlIGN1cnJlbnRseSBpbiBhIEdvb2dsZSBEb2NzIGRvY3VtZW50IGVkaXRvclxuICAgICAqL1xuICAgIHN0YXRpYyBpc0luR29vZ2xlRG9jcygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBHb29nbGUgRG9jcyBzcGVjaWZpYyBlbGVtZW50c1xuICAgICAgICAgICAgY29uc3QgaXNJbkRvY3MgPSB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09IFwiZG9jcy5nb29nbGUuY29tXCIgJiZcbiAgICAgICAgICAgICAgICAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5raXgtcGFyYWdyYXBocmVuZGVyZXJcIikgIT09IG51bGwgfHxcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kb2NzLWVkaXRvclwiKSAhPT0gbnVsbCk7XG4gICAgICAgICAgICByZXR1cm4gaXNJbkRvY3M7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY2hlY2tpbmcgaWYgaW4gR29vZ2xlIERvY3M6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGVudGlyZSBkb2N1bWVudCBjb250ZW50IGZyb20gR29vZ2xlIERvY3NcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0RG9jdW1lbnRDb250ZW50KG1heFJldHJpZXMgPSAzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkF0dGVtcHRpbmcgdG8gcmV0cmlldmUgZG9jdW1lbnQgY29udGVudC4uLlwiKTtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIGluIGEgR29vZ2xlIERvY3MgZG9jdW1lbnQgZWRpdG9yXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNJbkdvb2dsZURvY3MoKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJOb3QgaW4gYSBHb29nbGUgRG9jcyBkb2N1bWVudFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEdldCBhbGwgdGV4dCBjb250ZW50IGZyb20gdGhlIGRvY3VtZW50XG4gICAgICAgICAgICBjb25zdCBwYXJhZ3JhcGhzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5raXgtcGFyYWdyYXBocmVuZGVyZXJcIik7XG4gICAgICAgICAgICBpZiAoIXBhcmFncmFwaHMgfHwgcGFyYWdyYXBocy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IGZpbmQgcGFyYWdyYXBoIGVsZW1lbnRzIGluIGRvY3VtZW50LCBET00gbWlnaHQgbm90IGJlIHJlYWR5XCIpO1xuICAgICAgICAgICAgICAgIC8vIFN0YXJ0IGRlYnVnIGxvZ2dpbmcgd2hlbiB3ZSBjYW4ndCBmaW5kIHBhcmFncmFwaCBlbGVtZW50c1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREZWJ1Z0xvZ2dpbmcoKTtcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIHJldHJpZXMgbGVmdCwgdHJ5IGEgZGlmZmVyZW50IHNlbGVjdG9yXG4gICAgICAgICAgICAgICAgaWYgKG1heFJldHJpZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUcnlpbmcgYWx0ZXJuYXRpdmUgc2VsZWN0b3JzICgke21heFJldHJpZXN9IHJldHJpZXMgbGVmdClgKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IGFsdGVybmF0aXZlIHNlbGVjdG9ycyBmb3IgR29vZ2xlIERvY3MgY29udGVudFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbHRlcm5hdGl2ZXMgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICBcIi5raXgtcGFnZS1jb250ZW50LXdyYXBwZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiLmRvY3MtdGV4dGV2ZW50dGFyZ2V0LWlmcmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCIuZG9jcy1lZGl0b3ItY29udGFpbmVyXCIsXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc2VsZWN0b3Igb2YgYWx0ZXJuYXRpdmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzICYmIGVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgJHtlbGVtZW50cy5sZW5ndGh9IGVsZW1lbnRzIHdpdGggc2VsZWN0b3IgJHtzZWxlY3Rvcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcnkgdG8gZ2V0IHRoZSBjb250ZW50IGZyb20gdGhlc2UgZWxlbWVudHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gQXJyYXkuZnJvbShlbGVtZW50cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZWxlbWVudCkgPT4gZWxlbWVudC50ZXh0Q29udGVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgUmV0cmlldmVkICR7Y29udGVudC5sZW5ndGh9IGNoYXJhY3RlcnMgdXNpbmcgYWx0ZXJuYXRpdmUgc2VsZWN0b3JgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIG5vbmUgb2YgdGhlIGFsdGVybmF0aXZlcyB3b3JrZWQsIHdhaXQgYSBiaXQgYW5kIHJldHJ5IHdpdGggb3JpZ2luYWwgc2VsZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMuZ2V0RG9jdW1lbnRDb250ZW50KG1heFJldHJpZXMgLSAxKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBFeHRyYWN0IGNvbnRlbnRcbiAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50Q29udGVudCA9IEFycmF5LmZyb20ocGFyYWdyYXBocylcbiAgICAgICAgICAgICAgICAubWFwKChlbGVtZW50KSA9PiBlbGVtZW50LnRleHRDb250ZW50KVxuICAgICAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgaWYgKCFkb2N1bWVudENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJEb2N1bWVudCBjb250ZW50IGFwcGVhcnMgdG8gYmUgZW1wdHlcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydERlYnVnTG9nZ2luZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQ29udGVudCByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5LCB3ZSBjYW4gc3RvcCBkZWJ1ZyBsb2dnaW5nXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wRGVidWdMb2dnaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUmV0cmlldmVkICR7ZG9jdW1lbnRDb250ZW50Lmxlbmd0aH0gY2hhcmFjdGVycyBmcm9tIGRvY3VtZW50YCk7XG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnRDb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgZG9jdW1lbnQgY29udGVudDpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5zdGFydERlYnVnTG9nZ2luZygpO1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGRvY3VtZW50IGNvbnRlbnQgd2l0aG91dCBjaGVja2luZyBpZiB3ZSdyZSBpbiBHb29nbGUgRG9jcy5cbiAgICAgKiBUaGlzIGlzIHVzZWQgYXMgYSBmYWxsYmFjayBtZXRob2QgZm9yIHRoZSBtZXNzYWdlIHBhc3NpbmcgYXJjaGl0ZWN0dXJlLlxuICAgICAqL1xuICAgIHN0YXRpYyBmb3JjZUdldERvY3VtZW50Q29udGVudCgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXR0ZW1wdGluZyBmb3JjZWQgZG9jdW1lbnQgY29udGVudCByZXRyaWV2YWwuLi5cIik7XG4gICAgICAgICAgICAvLyBGaXJzdCB0cnkgdG8gaW5qZWN0IGEgaG9vayBkaXJlY3RseSBpbnRvIHRoZSBHb29nbGUgRG9jcyBwYWdlXG4gICAgICAgICAgICAvLyBUaGlzIGFnZ3Jlc3NpdmUgYXBwcm9hY2ggbWF5IGhlbHAgYWNjZXNzIHRoZSBpbm5lciBkb2N1bWVudFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzY3JpcHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgICAgICBzY3JpcHRFbGVtZW50LnRleHRDb250ZW50ID0gYFxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeSB0byBhY2Nlc3MgR29vZ2xlIERvY3MgaW50ZXJuYWwgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LklTX0lOVEVHUkFUSU9OX0FEQVBURVJfUlVOTklOR19fKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSBkb2N1bWVudCB0ZXh0IGluIGEgZ2xvYmFsIHZhcmlhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cudmliZVdyaXRlRXh0cmFjdGVkQ29udGVudCA9IGRvY3VtZW50LmJvZHkuaW5uZXJUZXh0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5pbm5lclRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRvY3VtZW50IGNvbnRlbnQgZXh0cmFjdGVkIGJ5IGluamVjdGVkIHNjcmlwdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSW5qZWN0ZWQgc2NyaXB0IGVycm9yOlwiLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgLy8gV2FpdCBhIG1vbWVudCBmb3Igc2NyaXB0IHRvIGV4ZWN1dGVcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZChzY3JpcHRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHNjcmlwdCBtYW5hZ2VkIHRvIGV4dHJhY3QgY29udGVudFxuICAgICAgICAgICAgICAgIGNvbnN0IGV4dHJhY3RlZENvbnRlbnQgPSB3aW5kb3dcbiAgICAgICAgICAgICAgICAgICAgLnZpYmVXcml0ZUV4dHJhY3RlZENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhY3RlZENvbnRlbnQgJiYgZXh0cmFjdGVkQ29udGVudC5sZW5ndGggPiAxMDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFJldHJpZXZlZCAke2V4dHJhY3RlZENvbnRlbnQubGVuZ3RofSBjaGFyYWN0ZXJzIHZpYSBpbmplY3RlZCBzY3JpcHRgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RlZENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiU2NyaXB0IGluamVjdGlvbiBhcHByb2FjaCBmYWlsZWQ6XCIsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVHJ5IG11bHRpcGxlIHNlbGVjdG9ycyB0byBmaW5kIGRvY3VtZW50IGNvbnRlbnRcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9ycyA9IFtcbiAgICAgICAgICAgICAgICBcIi5raXgtcGFyYWdyYXBocmVuZGVyZXJcIixcbiAgICAgICAgICAgICAgICBcIi5raXgtcGFnZS1jb250ZW50LXdyYXBwZXJcIixcbiAgICAgICAgICAgICAgICBcIi5kb2NzLWVkaXRvci1jb250YWluZXJcIixcbiAgICAgICAgICAgICAgICBcIi5raXgtYXBwdmlldy1lZGl0b3JcIixcbiAgICAgICAgICAgICAgICBcIi5kb2NzLXRleHRldmVudHRhcmdldC1pZnJhbWVcIixcbiAgICAgICAgICAgICAgICBcIi5raXgtY2FudmFzLXRpbGUtY29udGVudFwiLFxuICAgICAgICAgICAgICAgIFwiLmdvb2ctaW5saW5lLWJsb2NrLmtpeC1saW5ldmlldy10ZXh0LWJsb2NrXCIsXG4gICAgICAgICAgICAgICAgXCJbY29udGVudGVkaXRhYmxlPSd0cnVlJ11cIixcbiAgICAgICAgICAgICAgICBcIi5kb2NzLXRleHQtdWktY3Vyc29yLWJsaW5rXCIsIC8vIFRyeSB0byBmaW5kIGN1cnNvciBwb3NpdGlvblxuICAgICAgICAgICAgICAgIFwiLmtpeC1jYW52YXMtdGlsZS1jb250ZW50XCIsIC8vIFRyeSB0byBmaW5kIGNhbnZhcyBlbGVtZW50c1xuICAgICAgICAgICAgICAgIFwiLmdvb2ctaW5saW5lLWJsb2NrXCIsIC8vIEdlbmVyaWMgR29vZ2xlIERvY3MgZWxlbWVudFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VsZWN0b3Igb2Ygc2VsZWN0b3JzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHMgJiYgZWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgJHtlbGVtZW50cy5sZW5ndGh9IGVsZW1lbnRzIHdpdGggc2VsZWN0b3IgJHtzZWxlY3Rvcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IEFycmF5LmZyb20oZWxlbWVudHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChlbGVtZW50KSA9PiBlbGVtZW50LnRleHRDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgUmV0cmlldmVkICR7Y29udGVudC5sZW5ndGh9IGNoYXJhY3RlcnMgdXNpbmcgc2VsZWN0b3IgJHtzZWxlY3Rvcn1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgYWxsIHNlbGVjdG9ycyBmYWlsLCB0cnkgdG8gZ2V0IGFueSB0ZXh0IGZyb20gdGhlIGRvY3VtZW50XG4gICAgICAgICAgICBjb25zdCBhbGxUZXh0ID0gZG9jdW1lbnQuYm9keS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIGlmIChhbGxUZXh0ICYmIGFsbFRleHQubGVuZ3RoID4gMTAwKSB7XG4gICAgICAgICAgICAgICAgLy8gT25seSB1c2UgaWYgc3Vic3RhbnRpYWwgY29udGVudFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBSZXRyaWV2ZWQgJHthbGxUZXh0Lmxlbmd0aH0gY2hhcmFjdGVycyBmcm9tIGRvY3VtZW50LmJvZHkudGV4dENvbnRlbnRgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWxsVGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGb3JjZWQgZG9jdW1lbnQgY29udGVudCByZXRyaWV2YWwgZmFpbGVkIC0gbm8gY29udGVudCBmb3VuZFwiKTtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGZvcmNlZCBkb2N1bWVudCBjb250ZW50IHJldHJpZXZhbDpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgY3VycmVudCBzZWxlY3RlZCB0ZXh0IGluIEdvb2dsZSBEb2NzXG4gICAgICovXG4gICAgc3RhdGljIGdldFNlbGVjdGVkVGV4dCgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFVzaW5nIHRoZSBHb29nbGUgRG9jcyBzZWxlY3Rpb24gZnVuY3Rpb25hbGl0eVxuICAgICAgICAgICAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBzZWxlY3RlZCB0ZXh0OlwiLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgYSBHb29nbGUgRG9jcyBjb21tZW50IGF0IHRoZSBjdXJyZW50IHNlbGVjdGlvblxuICAgICAqIEBwYXJhbSBjb21tZW50VGV4dCAtIFRleHQgdG8gYWRkIGFzIGEgY29tbWVudFxuICAgICAqL1xuICAgIHN0YXRpYyBhZGRDb21tZW50KGNvbW1lbnRUZXh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBGaXJzdCwgbmVlZCB0byBtYWtlIHN1cmUgc29tZXRoaW5nIGlzIHNlbGVjdGVkXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZFRleHQgPSB0aGlzLmdldFNlbGVjdGVkVGV4dCgpO1xuICAgICAgICAgICAgaWYgKCFzZWxlY3RlZFRleHQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJObyB0ZXh0IHNlbGVjdGVkIHRvIGFkZCBhIGNvbW1lbnQgdG9cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2ltdWxhdGUgY2xpY2tpbmcgdGhlIFwiQWRkIGNvbW1lbnRcIiBidXR0b24gb3IgbWVudSBpdGVtXG4gICAgICAgICAgICBjb25zdCBjb21tZW50QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2FyaWEtbGFiZWw9XCJBZGQgY29tbWVudFwiXScpO1xuICAgICAgICAgICAgaWYgKGNvbW1lbnRCdXR0b24pIHtcbiAgICAgICAgICAgICAgICBjb21tZW50QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIGNvbW1lbnQgYm94IHRvIGFwcGVhclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBjb21tZW50IGlucHV0IGJveCBhbmQgaW5zZXJ0IG91ciB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRvY29zLWlucHV0LXRleHRhcmVhXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29tbWVudEJveCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZSBvZiB0aGUgY29tbWVudCBib3hcbiAgICAgICAgICAgICAgICAgICAgICAgIChfYiA9IChfYSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoSFRNTFRleHRBcmVhRWxlbWVudC5wcm90b3R5cGUsIFwidmFsdWVcIikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zZXQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKGNvbW1lbnRCb3gsIGNvbW1lbnRUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgaW5wdXQgZXZlbnQgdG8gZW5zdXJlIEdvb2dsZSBEb2NzIHJlY29nbml6ZXMgdGhlIGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudEJveC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImlucHV0XCIsIHsgYnViYmxlczogdHJ1ZSB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJtaXQgdGhlIGNvbW1lbnQgLSBmaW5kIHRoZSBcIkNvbW1lbnRcIiBidXR0b24gYW5kIGNsaWNrIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50U3VibWl0QnV0dG9uID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiYnV0dG9uXCIpKS5maW5kKChidXR0b24pID0+IGJ1dHRvbi50ZXh0Q29udGVudCA9PT0gXCJDb21tZW50XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21tZW50U3VibWl0QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRTdWJtaXRCdXR0b24uY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWRkaW5nIGNvbW1lbnQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIFVSTCBpcyBhIEdvb2dsZSBEb2NzIGRvY3VtZW50IFVSTFxuICAgICAqL1xuICAgIHN0YXRpYyBpc0dvb2dsZURvY3NVcmwodXJsKSB7XG4gICAgICAgIHJldHVybiB1cmwuc3RhcnRzV2l0aChcImh0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L1wiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjdXJyZW50IGRvY3VtZW50J3MgdGl0bGVcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0RG9jdW1lbnRUaXRsZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZG9jcy10aXRsZS1pbnB1dFwiKTtcbiAgICAgICAgICAgIGlmICh0aXRsZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGl0bGVFbGVtZW50LnRleHRDb250ZW50IHx8IFwiVW50aXRsZWQgRG9jdW1lbnRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcIlVudGl0bGVkIERvY3VtZW50XCI7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBkb2N1bWVudCB0aXRsZTpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIFwiVW50aXRsZWQgRG9jdW1lbnRcIjtcbiAgICAgICAgfVxuICAgIH1cbn1cbkdvb2dsZURvY3NBUEkuZGVidWdJbnRlcnZhbCA9IG51bGw7XG5Hb29nbGVEb2NzQVBJLmxhc3REZWJ1Z1RpbWUgPSAwO1xuIiwiLyoqXG4gKiBDb250ZW50IFNjcmlwdCBmb3IgVmliZVdyaXRlIC0gR29vZ2xlIERvY3MgSW50ZWdyYXRpb25cbiAqXG4gKiBUaGlzIHNjcmlwdCBpcyBpbmplY3RlZCBpbnRvIEdvb2dsZSBEb2NzIHBhZ2VzIGFuZCBoYW5kbGVzOlxuICogLSBBZGRpbmcgVUkgZWxlbWVudHMgdG8gdGhlIEdvb2dsZSBEb2NzIGludGVyZmFjZVxuICogLSBDcmVhdGluZyBhbmQgbWFuYWdpbmcgdGhlIHNpZGViYXJcbiAqIC0gQ29tbXVuaWNhdGluZyB3aXRoIHRoZSBHb29nbGUgRG9jcyBkb2N1bWVudFxuICogLSBTZW5kaW5nIGRvY3VtZW50IGNvbnRlbnQgdG8gdGhlIGJhY2tncm91bmQgc2NyaXB0XG4gKi9cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgR29vZ2xlRG9jc0FQSSB9IGZyb20gXCIuLi91dGlscy9nb29nbGUtZG9jcy1hcGlcIjtcbi8vIElmIGFscmVhZHkgaW5qZWN0ZWQsIGV4aXQgZWFybHlcbmlmICh3aW5kb3cudmliZVdyaXRlSW5qZWN0ZWQpIHtcbiAgICBjb25zb2xlLmxvZyhcIlZpYmVXcml0ZSBhbHJlYWR5IGluamVjdGVkLCBza2lwcGluZy4uLlwiKTtcbn1cbmVsc2Uge1xuICAgIHdpbmRvdy52aWJlV3JpdGVJbmplY3RlZCA9IHRydWU7XG4gICAgY29uc29sZS5sb2coXCJWaWJlV3JpdGUgY29udGVudCBzY3JpcHQgbG9hZGVkXCIpO1xuICAgIC8vIEluaXRpYWxpemUgVmliZVdyaXRlIGFmdGVyIHRoZSBwYWdlIGhhcyBmdWxseSBsb2FkZWRcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgaW5pdFZpYmVXcml0ZSk7XG59XG4vLyBNYWluIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uXG5mdW5jdGlvbiBpbml0VmliZVdyaXRlKCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiSW5pdGlhbGl6aW5nIFZpYmVXcml0ZS4uLlwiKTtcbiAgICAgICAgLy8gT25seSBydW4gb24gR29vZ2xlIERvY3MgZG9jdW1lbnQgcGFnZXNcbiAgICAgICAgaWYgKCFHb29nbGVEb2NzQVBJLmlzSW5Hb29nbGVEb2NzKCkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm90IGluIGEgR29vZ2xlIERvY3MgZG9jdW1lbnQsIGV4aXRpbmcuLi5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2FpdCBmb3IgdGhlIEdvb2dsZSBEb2NzIFVJIHRvIGZ1bGx5IGxvYWRcbiAgICAgICAgeWllbGQgd2FpdEZvckVsZW1lbnQoXCIuZG9jcy10aXRsZWJhci1idXR0b25zXCIpO1xuICAgICAgICAvLyBTdGFydCBwZXJpb2RpYyBkb2N1bWVudCBjb250ZW50IG1vbml0b3JpbmcgZm9yIGRlYnVnZ2luZ1xuICAgICAgICBzdGFydERvY3VtZW50TW9uaXRvcmluZygpO1xuICAgICAgICAvLyBBZGQgb3VyIGN1c3RvbSBVSSBlbGVtZW50c1xuICAgICAgICBhZGRWaWJlV3JpdGVVSSgpO1xuICAgICAgICAvLyBTZXQgdXAgbWVzc2FnZSBoYW5kbGluZ1xuICAgICAgICBzZXR1cE1lc3NhZ2VIYW5kbGVycygpO1xuICAgIH0pO1xufVxuLy8gTW9uaXRvciBkb2N1bWVudCBjb250ZW50IGF2YWlsYWJpbGl0eVxuZnVuY3Rpb24gc3RhcnREb2N1bWVudE1vbml0b3JpbmcoKSB7XG4gICAgZGVidWdMb2coXCJTdGFydGluZyBkb2N1bWVudCBjb250ZW50IG1vbml0b3JpbmcuLi5cIik7XG4gICAgLy8gRW5hYmxlIGRlYnVnIGxvZ2dpbmcgaW4gR29vZ2xlRG9jc0FQSVxuICAgIEdvb2dsZURvY3NBUEkuc3RhcnREZWJ1Z0xvZ2dpbmcoKTtcbiAgICAvLyBBbHNvIHBlcmZvcm0gb3VyIG93biBjaGVjayB0byBlbnN1cmUgZG9jdW1lbnQgaXMgYWNjZXNzaWJsZVxuICAgIGxldCBjaGVja0NvdW50ID0gMDtcbiAgICBjb25zdCBtYXhDaGVja3MgPSAyMDtcbiAgICBjb25zdCBjaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBjaGVja0NvdW50Kys7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gR29vZ2xlRG9jc0FQSS5nZXREb2N1bWVudENvbnRlbnQoKTtcbiAgICAgICAgICAgIGlmIChjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgZGVidWdMb2coYERvY3VtZW50IGNvbnRlbnQgbW9uaXRvcmluZzogQ29udGVudCBhY2Nlc3NpYmxlICgke2NvbnRlbnQubGVuZ3RofSBjaGFycylgKTtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGNoZWNrSW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgIEdvb2dsZURvY3NBUEkuc3RvcERlYnVnTG9nZ2luZygpOyAvLyBTdG9wIGxvZ2dpbmcgb25jZSB3ZSBjb25maXJtIGl0IHdvcmtzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZyhgRG9jdW1lbnQgY29udGVudCBtb25pdG9yaW5nOiBObyBjb250ZW50IGF2YWlsYWJsZSAoY2hlY2sgJHtjaGVja0NvdW50fS8ke21heENoZWNrc30pYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgZGVidWdMb2coXCJEb2N1bWVudCBjb250ZW50IG1vbml0b3Jpbmc6IEVycm9yIGFjY2Vzc2luZyBjb250ZW50XCIsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU3RvcCBjaGVja2luZyBhZnRlciBtYXhDaGVja3NcbiAgICAgICAgaWYgKGNoZWNrQ291bnQgPj0gbWF4Q2hlY2tzKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZyhcIkRvY3VtZW50IGNvbnRlbnQgbW9uaXRvcmluZzogTWF4IGNoZWNrcyByZWFjaGVkLCBzdG9wcGluZyBtb25pdG9yaW5nXCIpO1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChjaGVja0ludGVydmFsKTtcbiAgICAgICAgfVxuICAgIH0sIDMwMDApO1xufVxuLy8gRnVuY3Rpb24gdG8gY3JlYXRlIGFuZCBhZGQgdGhlIFZpYmVXcml0ZSBVSSB0byBHb29nbGUgRG9jc1xuZnVuY3Rpb24gYWRkVmliZVdyaXRlVUkoKSB7XG4gICAgdmFyIF9hO1xuICAgIHRyeSB7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgc2lkZWJhciBjb250YWluZXJcbiAgICAgICAgY29uc3Qgc2lkZWJhckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHNpZGViYXJDb250YWluZXIuY2xhc3NOYW1lID0gXCJ2aWJld3JpdGUtc2lkZWJhci1jb250YWluZXJcIjtcbiAgICAgICAgc2lkZWJhckNvbnRhaW5lci5pZCA9IFwidmliZXdyaXRlLXNpZGViYXJcIjtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzaWRlYmFyQ29udGFpbmVyKTtcbiAgICAgICAgZGVidWdMb2coXCJTaWRlYmFyIGNvbnRhaW5lciBjcmVhdGVkIGFuZCBhZGRlZCB0byBET01cIiwge1xuICAgICAgICAgICAgaWQ6IHNpZGViYXJDb250YWluZXIuaWQsXG4gICAgICAgICAgICBjbGFzc05hbWU6IHNpZGViYXJDb250YWluZXIuY2xhc3NOYW1lLFxuICAgICAgICAgICAgcGFyZW50RWxlbWVudDogKF9hID0gc2lkZWJhckNvbnRhaW5lci5wYXJlbnRFbGVtZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudGFnTmFtZSxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgc2lkZWJhciBpZnJhbWVcbiAgICAgICAgY29uc3Qgc2lkZWJhcklmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG4gICAgICAgIHNpZGViYXJJZnJhbWUuaWQgPSBcInZpYmV3cml0ZS1zaWRlYmFyLWlmcmFtZVwiOyAvLyBBZGQgYSBzcGVjaWZpYyBJRCBmb3IgZWFzaWVyIHNlbGVjdGlvblxuICAgICAgICBzaWRlYmFySWZyYW1lLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgICAgIHNpZGViYXJJZnJhbWUuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XG4gICAgICAgIHNpZGViYXJJZnJhbWUuc3R5bGUuYm9yZGVyID0gXCJub25lXCI7XG4gICAgICAgIHNpZGViYXJJZnJhbWUuYWxsb3cgPSBcImNsaXBib2FyZC1yZWFkOyBjbGlwYm9hcmQtd3JpdGVcIjsgLy8gQWRkIHBlcm1pc3Npb25zXG4gICAgICAgIHNpZGViYXJJZnJhbWUuc3JjID0gY2hyb21lLnJ1bnRpbWUuZ2V0VVJMKFwic2lkZWJhci5odG1sXCIpO1xuICAgICAgICBzaWRlYmFyQ29udGFpbmVyLmFwcGVuZENoaWxkKHNpZGViYXJJZnJhbWUpO1xuICAgICAgICAvLyBTdG9yZSBpZnJhbWUgcmVmZXJlbmNlIGluIHdpbmRvdyBmb3IgZWFzeSBhY2Nlc3MgZnJvbSBhbnl3aGVyZVxuICAgICAgICB3aW5kb3cudmliZVdyaXRlU2lkZWJhcklmcmFtZSA9IHNpZGViYXJJZnJhbWU7XG4gICAgICAgIC8vIEFkZCBhIGxvYWQgZXZlbnQgbGlzdGVuZXIgdG8gdmVyaWZ5IHRoZSBpZnJhbWUgbG9hZGVkIHByb3Blcmx5XG4gICAgICAgIHNpZGViYXJJZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgZGVidWdMb2coXCJTaWRlYmFyIGlmcmFtZSBsb2FkZWRcIiwge1xuICAgICAgICAgICAgICAgIHNyYzogc2lkZWJhcklmcmFtZS5zcmMsXG4gICAgICAgICAgICAgICAgaGFzQ29udGVudFdpbmRvdzogISFzaWRlYmFySWZyYW1lLmNvbnRlbnRXaW5kb3csXG4gICAgICAgICAgICAgICAgcmVhZHlTdGF0ZTogKChfYSA9IHNpZGViYXJJZnJhbWUuY29udGVudERvY3VtZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVhZHlTdGF0ZSkgfHwgXCJ1bmtub3duXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFNlbmQgYSByZWFkeSBtZXNzYWdlIHRvIHRoZSBzaWRlYmFyXG4gICAgICAgICAgICBpZiAoc2lkZWJhcklmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICAgICAgc2lkZWJhcklmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKHsgdHlwZTogXCJTSURFQkFSX1JFQURZXCIgfSwgXCIqXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gQWRkIFZpYmVXcml0ZSBidXR0b25zIHRvIHRoZSBHb29nbGUgRG9jcyB0b29sYmFyXG4gICAgICAgIGNvbnN0IHRvb2xiYXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRvY3MtdGl0bGViYXItYnV0dG9uc1wiKTtcbiAgICAgICAgaWYgKHRvb2xiYXJDb250YWluZXIpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBjb250YWluZXIgZm9yIG91ciBidXR0b25zXG4gICAgICAgICAgICBjb25zdCB2aWJlV3JpdGVUb29sYmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHZpYmVXcml0ZVRvb2xiYXIuY2xhc3NOYW1lID0gXCJ2aWJld3JpdGUtdG9vbGJhclwiO1xuICAgICAgICAgICAgdmliZVdyaXRlVG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtZmxleFwiO1xuICAgICAgICAgICAgdmliZVdyaXRlVG9vbGJhci5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjsgLy8gQ3JlYXRlIHRvZ2dsZSBzaWRlYmFyIGJ1dHRvblxuICAgICAgICAgICAgY29uc3QgdG9nZ2xlU2lkZWJhckJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgICB0b2dnbGVTaWRlYmFyQnV0dG9uLmNsYXNzTmFtZSA9IFwidmliZXdyaXRlLWJ1dHRvblwiO1xuICAgICAgICAgICAgdG9nZ2xlU2lkZWJhckJ1dHRvbi50ZXh0Q29udGVudCA9IFwiVmliZVdyaXRlXCI7XG4gICAgICAgICAgICB0b2dnbGVTaWRlYmFyQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiIzFhNzNlOFwiO1xuICAgICAgICAgICAgdG9nZ2xlU2lkZWJhckJ1dHRvbi5zdHlsZS5jb2xvciA9IFwid2hpdGVcIjtcbiAgICAgICAgICAgIHRvZ2dsZVNpZGViYXJCdXR0b24uc3R5bGUucGFkZGluZyA9IFwiOHB4IDEycHhcIjtcbiAgICAgICAgICAgIHRvZ2dsZVNpZGViYXJCdXR0b24uc3R5bGUuYm9yZGVyID0gXCJub25lXCI7XG4gICAgICAgICAgICB0b2dnbGVTaWRlYmFyQnV0dG9uLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XG4gICAgICAgICAgICB0b2dnbGVTaWRlYmFyQnV0dG9uLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgICAgICAgICAgdG9nZ2xlU2lkZWJhckJ1dHRvbi5zdHlsZS5tYXJnaW5SaWdodCA9IFwiMTBweFwiO1xuICAgICAgICAgICAgdG9nZ2xlU2lkZWJhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdG9nZ2xlU2lkZWJhcik7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYW5hbHl6ZSBidXR0b25cbiAgICAgICAgICAgIGNvbnN0IGFuYWx5emVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICAgICAgYW5hbHl6ZUJ1dHRvbi5jbGFzc05hbWUgPSBcInZpYmV3cml0ZS1idXR0b25cIjtcbiAgICAgICAgICAgIGFuYWx5emVCdXR0b24udGV4dENvbnRlbnQgPSBcIkFuYWx5emVcIjtcbiAgICAgICAgICAgIGFuYWx5emVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFuYWx5emVEb2N1bWVudCk7XG4gICAgICAgICAgICAvLyBDcmVhdGUgZmVlZGJhY2sgYnV0dG9uXG4gICAgICAgICAgICBjb25zdCBmZWVkYmFja0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgICBmZWVkYmFja0J1dHRvbi5jbGFzc05hbWUgPSBcInZpYmV3cml0ZS1idXR0b25cIjtcbiAgICAgICAgICAgIGZlZWRiYWNrQnV0dG9uLnRleHRDb250ZW50ID0gXCJBZGQgRmVlZGJhY2tcIjtcbiAgICAgICAgICAgIGZlZWRiYWNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhZGRGZWVkYmFjayk7XG4gICAgICAgICAgICAvLyBBZGQgYnV0dG9ucyB0byB0aGUgdG9vbGJhclxuICAgICAgICAgICAgdmliZVdyaXRlVG9vbGJhci5hcHBlbmRDaGlsZCh0b2dnbGVTaWRlYmFyQnV0dG9uKTtcbiAgICAgICAgICAgIHZpYmVXcml0ZVRvb2xiYXIuYXBwZW5kQ2hpbGQoYW5hbHl6ZUJ1dHRvbik7XG4gICAgICAgICAgICB2aWJlV3JpdGVUb29sYmFyLmFwcGVuZENoaWxkKGZlZWRiYWNrQnV0dG9uKTtcbiAgICAgICAgICAgIC8vIEluc2VydCBvdXIgdG9vbGJhciBiZWZvcmUgdGhlIHNoYXJlIGJ1dHRvblxuICAgICAgICAgICAgdG9vbGJhckNvbnRhaW5lci5pbnNlcnRCZWZvcmUodmliZVdyaXRlVG9vbGJhciwgdG9vbGJhckNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIGRlYnVnTG9nKFwiVmliZVdyaXRlIFVJIGFkZGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZGVidWdMb2coXCJFcnJvciBhZGRpbmcgVmliZVdyaXRlIFVJOlwiLCBlcnJvcik7XG4gICAgfVxufVxuLy8gRnVuY3Rpb24gdG8gdG9nZ2xlIHRoZSBzaWRlYmFyXG5mdW5jdGlvbiB0b2dnbGVTaWRlYmFyKCkge1xuICAgIGxldCBzaWRlYmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWJld3JpdGUtc2lkZWJhclwiKTtcbiAgICAvLyBJZiBzaWRlYmFyIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBpdCBmaXJzdFxuICAgIGlmICghc2lkZWJhcikge1xuICAgICAgICBkZWJ1Z0xvZyhcIlNpZGViYXIgbm90IGZvdW5kLCBjcmVhdGluZyBpdCBmaXJzdFwiKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGFkZFZpYmVXcml0ZVVJKCk7XG4gICAgICAgICAgICBzaWRlYmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWJld3JpdGUtc2lkZWJhclwiKTtcbiAgICAgICAgICAgIGRlYnVnTG9nKFwiU2lkZWJhciBjcmVhdGVkIHN1Y2Nlc3NmdWxseTpcIiwgc2lkZWJhcik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZyhcIkVycm9yIGNyZWF0aW5nIHNpZGViYXI6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIFNob3cgYW4gYWxlcnQgdG8gdGhlIHVzZXIgdGhhdCBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgICAgICAgICAgYWxlcnQoXCJWaWJlV3JpdGU6IENvdWxkIG5vdCBjcmVhdGUgc2lkZWJhci4gUGxlYXNlIHJlbG9hZCB0aGUgcGFnZSBhbmQgdHJ5IGFnYWluLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoc2lkZWJhcikge1xuICAgICAgICBjb25zdCBpc0N1cnJlbnRseU9wZW4gPSBzaWRlYmFyLmNsYXNzTGlzdC5jb250YWlucyhcIm9wZW5cIik7XG4gICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnRvZ2dsZShcIm9wZW5cIik7XG4gICAgICAgIGRlYnVnTG9nKGBTaWRlYmFyICR7aXNDdXJyZW50bHlPcGVuID8gXCJjbG9zZWRcIiA6IFwib3BlbmVkXCJ9YCk7XG4gICAgICAgIC8vIEZvcmNlIGEgcmVkcmF3IHRvIGVuc3VyZSB0aGUgc2lkZWJhciBhcHBlYXJzXG4gICAgICAgIHNpZGViYXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICBzaWRlYmFyLm9mZnNldEhlaWdodDsgLy8gRm9yY2UgYSByZWZsb3dcbiAgICAgICAgc2lkZWJhci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZGVidWdMb2coXCJGYWlsZWQgdG8gZmluZCBvciBjcmVhdGUgc2lkZWJhclwiKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbi8vIEZ1bmN0aW9uIHRvIGFuYWx5emUgdGhlIGRvY3VtZW50IGFuZCBzaG93IHN1Z2dlc3Rpb25zXG5mdW5jdGlvbiBhbmFseXplRG9jdW1lbnQoKSB7XG4gICAgLy8gTWFrZSBzdXJlIHRoZSBzaWRlYmFyIGlzIGNyZWF0ZWQgYW5kIG9wZW5lZCBmaXJzdFxuICAgIGNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpYmV3cml0ZS1zaWRlYmFyXCIpO1xuICAgIGlmICghc2lkZWJhcikge1xuICAgICAgICBkZWJ1Z0xvZyhcIlNpZGViYXIgbm90IGZvdW5kLCBjcmVhdGluZyBpdCBmaXJzdFwiKTtcbiAgICAgICAgYWRkVmliZVdyaXRlVUkoKTtcbiAgICB9XG4gICAgLy8gTm93IGdldCB0aGUgc2lkZWJhciAod2hldGhlciBpdCBleGlzdGVkIGJlZm9yZSBvciB3YXMganVzdCBjcmVhdGVkKVxuICAgIGNvbnN0IHNpZGViYXJFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWJld3JpdGUtc2lkZWJhclwiKTtcbiAgICBpZiAoc2lkZWJhckVsZW1lbnQgJiYgIXNpZGViYXJFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcIm9wZW5cIikpIHtcbiAgICAgICAgc2lkZWJhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XG4gICAgICAgIC8vIEZvcmNlIGEgcmVkcmF3XG4gICAgICAgIHNpZGViYXJFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgc2lkZWJhckVsZW1lbnQub2Zmc2V0SGVpZ2h0OyAvLyBGb3JjZSBhIHJlZmxvd1xuICAgICAgICBzaWRlYmFyRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgfVxuICAgIC8vIFNlbmQgdGhlIGFuYWx5emUgbWVzc2FnZSBkaXJlY3RseSB0byB0aGUgc2lkZWJhciBpZnJhbWVcbiAgICBjb25zdCBzaWRlYmFySWZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWJld3JpdGUtc2lkZWJhci1pZnJhbWVcIik7XG4gICAgaWYgKHNpZGViYXJJZnJhbWUgPT09IG51bGwgfHwgc2lkZWJhcklmcmFtZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2lkZWJhcklmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgIGRlYnVnTG9nKFwiU2VuZGluZyBBTkFMWVpFX0RPQ1VNRU5UIHRvIHNpZGViYXIgaWZyYW1lXCIpO1xuICAgICAgICBzaWRlYmFySWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoeyB0eXBlOiBcIkFOQUxZWkVfRE9DVU1FTlRcIiB9LCBcIipcIik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkZWJ1Z0xvZyhcIkNvdWxkIG5vdCBmaW5kIHNpZGViYXIgaWZyYW1lLCB0cnlpbmcgYnJvYWRjYXN0XCIpO1xuICAgICAgICAvLyBCcm9hZGNhc3QgdGhlIG1lc3NhZ2UgdG8gYW55IHdpbmRvdyB0aGF0IG1pZ2h0IGJlIGxpc3RlbmluZ1xuICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogXCJBTkFMWVpFX0RPQ1VNRU5UXCIsXG4gICAgICAgICAgICBzb3VyY2U6IFwiY29udGVudC1zY3JpcHRcIlxuICAgICAgICB9LCBcIipcIik7XG4gICAgICAgIC8vIEFsc28gdHJ5IHZpYSBjaHJvbWUgcnVudGltZSBtZXNzYWdpbmcgYXMgZmluYWwgZmFsbGJhY2tcbiAgICAgICAgY2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2UoeyB0eXBlOiBcIkFOQUxZWkVfRE9DVU1FTlRcIiB9KTtcbiAgICB9XG59XG4vLyBGdW5jdGlvbiB0byBhZGQgZmVlZGJhY2sgdG8gc2VsZWN0ZWQgdGV4dFxuZnVuY3Rpb24gYWRkRmVlZGJhY2soKSB7XG4gICAgLy8gR2V0IHRoZSBzZWxlY3RlZCB0ZXh0XG4gICAgY29uc3Qgc2VsZWN0ZWRUZXh0ID0gR29vZ2xlRG9jc0FQSS5nZXRTZWxlY3RlZFRleHQoKTtcbiAgICBpZiAoIXNlbGVjdGVkVGV4dCkge1xuICAgICAgICBhbGVydChcIlBsZWFzZSBzZWxlY3Qgc29tZSB0ZXh0IHRvIGdpdmUgZmVlZGJhY2sgb24uXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIE9wZW4gdGhlIHNpZGViYXJcbiAgICBjb25zdCBzaWRlYmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWJld3JpdGUtc2lkZWJhclwiKTtcbiAgICBpZiAoc2lkZWJhciAmJiAhc2lkZWJhci5jbGFzc0xpc3QuY29udGFpbnMoXCJvcGVuXCIpKSB7XG4gICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XG4gICAgfVxuICAgIC8vIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBzaWRlYmFyIHRvIGFuYWx5emUgdGhlIHNlbGVjdGVkIHRleHRcbiAgICBjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7XG4gICAgICAgIHR5cGU6IFwiQ0hBVF9SRVFVRVNUXCIsXG4gICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBQbGVhc2UgcmV2aWV3IGFuZCBpbXByb3ZlIHRoZSBmb2xsb3dpbmcgdGV4dDogXCIke3NlbGVjdGVkVGV4dH1cImAsXG4gICAgICAgICAgICBzZWxlY3RlZFRleHQsXG4gICAgICAgIH0sXG4gICAgfSk7XG59XG4vLyBTZXQgdXAgbWVzc2FnZSBoYW5kbGVyc1xuZnVuY3Rpb24gc2V0dXBNZXNzYWdlSGFuZGxlcnMoKSB7XG4gICAgZGVidWdMb2coXCJTZXR0aW5nIHVwIG1lc3NhZ2UgaGFuZGxlcnMuLi5cIik7XG4gICAgLy8gTGlzdGVuIGZvciBtZXNzYWdlcyBmcm9tIHRoZSBleHRlbnNpb25cbiAgICBjaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoKG1lc3NhZ2UsIHNlbmRlciwgc2VuZFJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGRlYnVnTG9nKFwiQ29udGVudCBzY3JpcHQgcmVjZWl2ZWQgbWVzc2FnZTpcIiwgbWVzc2FnZSk7XG4gICAgICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiQU5BTFlaRV9ET0NVTUVOVFwiOlxuICAgICAgICAgICAgICAgIGRlYnVnTG9nKFwiUmVjZWl2ZWQgQU5BTFlaRV9ET0NVTUVOVCBtZXNzYWdlXCIpO1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlVG9TaWRlYmFyKHsgdHlwZTogXCJBTkFMWVpFX0RPQ1VNRU5UXCIgfSk7XG4gICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHsgc3VjY2VzczogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJHRVRfRE9DVU1FTlRfQ09OVEVOVFwiOlxuICAgICAgICAgICAgICAgIGRlYnVnTG9nKFwiUmVjZWl2ZWQgR0VUX0RPQ1VNRU5UX0NPTlRFTlQgbWVzc2FnZSBmcm9tIGNocm9tZS5ydW50aW1lXCIpO1xuICAgICAgICAgICAgICAgIC8vIFRyeSBzdGFuZGFyZCBtZXRob2QgZmlyc3RcbiAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9IEdvb2dsZURvY3NBUEkuZ2V0RG9jdW1lbnRDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhhdCBmYWlscywgdHJ5IGZvcmNlZCByZXRyaWV2YWxcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdMb2coXCJTdGFuZGFyZCByZXRyaWV2YWwgZmFpbGVkLCB0cnlpbmcgZm9yY2VkIG1ldGhvZC4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IEdvb2dsZURvY3NBUEkuZm9yY2VHZXREb2N1bWVudENvbnRlbnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogISFjb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGNvbnRlbnQ6IGNvbnRlbnQgfHwgXCJcIiB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogIWNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gXCJDb3VsZCBub3QgcmV0cmlldmUgZG9jdW1lbnQgY29udGVudFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJHRVRfRE9DVU1FTlRfQ09OVEVOVF9SRUxBWVwiOlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29udGVudCBzY3JpcHQgcmVjZWl2ZWQgcmVsYXkgcmVxdWVzdCBmcm9tIGJhY2tncm91bmRcIik7XG4gICAgICAgICAgICAgICAgLy8gR2V0IGNvbnRlbnQgYW5kIGJyb2FkY2FzdCBpdCB0byBhbnkgbGlzdGVuaW5nIGlmcmFtZXNcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gR29vZ2xlRG9jc0FQSS5mb3JjZUdldERvY3VtZW50Q29udGVudCgpO1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZyhcIkdvdCBkb2N1bWVudCBjb250ZW50IHZpYSByZWxheVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50TGVuZ3RoOiAoY29udGVudCA9PT0gbnVsbCB8fCBjb250ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb250ZW50Lmxlbmd0aCkgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEJyb2FkY2FzdCB0byBhbnkgcG90ZW50aWFsIGxpc3RlbmVyc1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJET0NVTUVOVF9DT05URU5UX1JFU1BPTlNFXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50IHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IFwiY29udGVudC1yZWxheVwiLFxuICAgICAgICAgICAgICAgICAgICB9LCBcIipcIik7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFsc28gdHJ5IHRvIHNlbmQgZGlyZWN0bHkgdG8gdGhlIGlmcmFtZSBpZiB3ZSBoYXZlIGEgcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpZGViYXJJZnJhbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpYmV3cml0ZS1zaWRlYmFyLWlmcmFtZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpZGViYXJJZnJhbWUgPT09IG51bGwgfHwgc2lkZWJhcklmcmFtZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2lkZWJhcklmcmFtZS5jb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWRlYmFySWZyYW1lLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiRE9DVU1FTlRfQ09OVEVOVF9SRVNQT05TRVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQgfHwgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IFwiY29udGVudC1kaXJlY3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIFwiKlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UoeyBzdWNjZXNzOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHJlbGF5aW5nIGRvY3VtZW50IGNvbnRlbnQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIHJlbGF5IGRvY3VtZW50IGNvbnRlbnRcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlRPR0dMRV9TSURFQkFSXCI6XG4gICAgICAgICAgICAgICAgZGVidWdMb2coXCJUb2dnbGluZyBzaWRlYmFyIHZpc2liaWxpdHlcIik7XG4gICAgICAgICAgICAgICAgdG9nZ2xlU2lkZWJhcigpO1xuICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZSh7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGRlYnVnTG9nKFwiVW5rbm93biBtZXNzYWdlIHR5cGU6XCIsIG1lc3NhZ2UudHlwZSk7XG4gICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBcIlVua25vd24gbWVzc2FnZSB0eXBlXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIEltcG9ydGFudDogaW5kaWNhdGVzIHdlJ2xsIHJlc3BvbmQgYXN5bmNocm9ub3VzbHlcbiAgICB9KTsgLy8gQWxzbyBsaXN0ZW4gZm9yIG1lc3NhZ2VzIGZyb20gdGhlIHNpZGViYXIgaWZyYW1lXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIChldmVudCkgPT4ge1xuICAgICAgICAvLyBBY2NlcHQgbWVzc2FnZXMgZnJvbSB0aGUgc2lkZWJhciBpZnJhbWUsIGJ1dCBsb2cgYW5kIGRlYnVnIHRoZW0gcmVnYXJkbGVzcyBvZiBzb3VyY2VcbiAgICAgICAgZGVidWdMb2coXCJDb250ZW50IHNjcmlwdCByZWNlaXZlZCB3aW5kb3cgbWVzc2FnZTpcIiwgZXZlbnQuZGF0YSwgXCJTb3VyY2U6XCIsIGV2ZW50LnNvdXJjZSk7XG4gICAgICAgIC8vIERlYnVnIHNpZGViYXIgaWZyYW1lIGVsZW1lbnRcbiAgICAgICAgY29uc3Qgc2lkZWJhcklmcmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdmliZXdyaXRlLXNpZGViYXJcIik7XG4gICAgICAgIGRlYnVnTG9nKFwiU2lkZWJhciBpZnJhbWUgZWxlbWVudDpcIiwgc2lkZWJhcklmcmFtZSwgXCJ3aXRoIGNvbnRlbnRXaW5kb3c6XCIsIHNpZGViYXJJZnJhbWUgPT09IG51bGwgfHwgc2lkZWJhcklmcmFtZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2lkZWJhcklmcmFtZS5jb250ZW50V2luZG93KTtcbiAgICAgICAgLy8gQ2hlY2sgZXZlbnQgc291cmNlIGJ1dCBkb24ndCBibG9jayBtZXNzYWdlcyBkdXJpbmcgZGV2ZWxvcG1lbnRcbiAgICAgICAgY29uc3QgaXNGcm9tU2lkZWJhciA9IGV2ZW50LnNvdXJjZSA9PT0gKHNpZGViYXJJZnJhbWUgPT09IG51bGwgfHwgc2lkZWJhcklmcmFtZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2lkZWJhcklmcmFtZS5jb250ZW50V2luZG93KTtcbiAgICAgICAgaWYgKCFpc0Zyb21TaWRlYmFyKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZyhcIk1lc3NhZ2Ugbm90IGZyb20gc2lkZWJhciBpZnJhbWUsIGJ1dCBwcm9jZXNzaW5nIGFueXdheSBmb3IgZGVidWdnaW5nXCIpO1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoaXMgY29tbWVudCBhbmQgdGhlIG5leHQgbGluZSB0byBlbmZvcmNlIHN0cmljdCBzb3VyY2UgY2hlY2tpbmcgaW4gcHJvZHVjdGlvblxuICAgICAgICAgICAgLy8gcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudC5kYXRhICYmIGV2ZW50LmRhdGEudHlwZSA9PT0gXCJHRVRfRE9DVU1FTlRfQ09OVEVOVFwiKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZyhcIlByb2Nlc3NpbmcgR0VUX0RPQ1VNRU5UX0NPTlRFTlQgcmVxdWVzdCBmcm9tIHNpZGViYXJcIik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIEZpcnN0IHRyeSByZWd1bGFyIG1ldGhvZFxuICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gR29vZ2xlRG9jc0FQSS5nZXREb2N1bWVudENvbnRlbnQoKTtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGF0IGZhaWxzLCB0cnkgZm9yY2VkIHJldHJpZXZhbFxuICAgICAgICAgICAgICAgIGlmICghY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZyhcIlN0YW5kYXJkIGNvbnRlbnQgcmV0cmlldmFsIGZhaWxlZCwgdHJ5aW5nIGZvcmNlZCBtZXRob2QuLi5cIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBHb29nbGVEb2NzQVBJLmZvcmNlR2V0RG9jdW1lbnRDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIHdlIHN0aWxsIGRvbid0IGhhdmUgY29udGVudCwgdHJ5IG9uZSBtb3JlIGFwcHJvYWNoIHdpdGggYSBkZWxheVxuICAgICAgICAgICAgICAgIGlmICghY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZyhcIlRyeWluZyBkZWxheWVkIHJldHJpZXZhbCBhcyBsYXN0IHJlc29ydC4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0UmVzb3J0Q29udGVudCA9IEdvb2dsZURvY3NBUEkuZm9yY2VHZXREb2N1bWVudENvbnRlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlVG9TaWRlYmFyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkRPQ1VNRU5UX0NPTlRFTlRfUkVTUE9OU0VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBsYXN0UmVzb3J0Q29udGVudCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkVtcHR5IGRvY3VtZW50IG9yIGNvbnRlbnQgY2Fubm90IGJlIGFjY2Vzc2VkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJldHVybiBlYXJseSwgdGhlIGRlbGF5ZWQgZnVuY3Rpb24gd2lsbCBoYW5kbGUgc2VuZGluZyB0aGUgbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFNlbmQgdGhlIGNvbnRlbnQgYmFjayB0byB0aGUgc2lkZWJhclxuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlVG9TaWRlYmFyKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJET0NVTUVOVF9DT05URU5UX1JFU1BPTlNFXCIsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQgfHwgXCJcIixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZyhgU2VudCBkb2N1bWVudCBjb250ZW50IHRvIHNpZGViYXIgKCR7KGNvbnRlbnQgPT09IG51bGwgfHwgY29udGVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGVudC5sZW5ndGgpIHx8IDB9IGNoYXJhY3RlcnMpYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZyhcIkVycm9yIGdldHRpbmcgZG9jdW1lbnQgY29udGVudDpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIC8vIFRyeSBmb3JjZWQgcmV0cmlldmFsIGFzIGEgbGFzdCByZXNvcnRcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWVyZ2VuY3lDb250ZW50ID0gR29vZ2xlRG9jc0FQSS5mb3JjZUdldERvY3VtZW50Q29udGVudCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW1lcmdlbmN5Q29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VUb1NpZGViYXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiRE9DVU1FTlRfQ09OVEVOVF9SRVNQT05TRVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGVtZXJnZW5jeUNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nKGBTZW50IGVtZXJnZW5jeSBkb2N1bWVudCBjb250ZW50IHRvIHNpZGViYXIgKCR7ZW1lcmdlbmN5Q29udGVudC5sZW5ndGh9IGNoYXJhY3RlcnMpYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdMb2coXCJFbWVyZ2VuY3kgY29udGVudCByZXRyaWV2YWwgYWxzbyBmYWlsZWQ6XCIsIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTZW5kIGVycm9yIGJhY2sgdG8gdGhlIHNpZGViYXJcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZVRvU2lkZWJhcih7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiRE9DVU1FTlRfQ09OVEVOVF9SRVNQT05TRVwiLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogXCJGYWlsZWQgdG8gcmV0cmlldmUgZG9jdW1lbnQgY29udGVudFwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LmRhdGEgJiYgZXZlbnQuZGF0YS50eXBlID09PSBcIkdFVF9TRUxFQ1RFRF9URVhUXCIpIHtcbiAgICAgICAgICAgIGRlYnVnTG9nKFwiUHJvY2Vzc2luZyBHRVRfU0VMRUNURURfVEVYVCByZXF1ZXN0IGZyb20gc2lkZWJhclwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IHNlbGVjdGVkIHRleHQgdXNpbmcgR29vZ2xlRG9jc0FQSVxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVGV4dCA9IEdvb2dsZURvY3NBUEkuZ2V0U2VsZWN0ZWRUZXh0KCk7XG4gICAgICAgICAgICAgICAgLy8gU2VuZCB0aGUgdGV4dCBiYWNrIHRvIHRoZSBzaWRlYmFyXG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VUb1NpZGViYXIoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlNFTEVDVEVEX1RFWFRfUkVTUE9OU0VcIixcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogc2VsZWN0ZWRUZXh0IHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGVidWdMb2coYFNlbnQgc2VsZWN0ZWQgdGV4dCB0byBzaWRlYmFyICgkeyhzZWxlY3RlZFRleHQgPT09IG51bGwgfHwgc2VsZWN0ZWRUZXh0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxlY3RlZFRleHQubGVuZ3RoKSB8fCAwfSBjaGFyYWN0ZXJzKWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZGVidWdMb2coXCJFcnJvciBnZXR0aW5nIHNlbGVjdGVkIHRleHQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAvLyBTZW5kIGVycm9yIGJhY2sgdG8gdGhlIHNpZGViYXJcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZVRvU2lkZWJhcih7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiU0VMRUNURURfVEVYVF9SRVNQT05TRVwiLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogXCJGYWlsZWQgdG8gcmV0cmlldmUgc2VsZWN0ZWQgdGV4dFwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gcG9zdCBtZXNzYWdlcyB0byB0aGUgc2lkZWJhciBpZnJhbWVcbmZ1bmN0aW9uIHBvc3RNZXNzYWdlVG9TaWRlYmFyKG1lc3NhZ2UpIHtcbiAgICBkZWJ1Z0xvZyhcIkF0dGVtcHRpbmcgdG8gcG9zdCBtZXNzYWdlIHRvIHNpZGViYXI6XCIsIG1lc3NhZ2UpO1xuICAgIC8vIEZpcnN0IHRyeSB0aGUgZGlyZWN0IHNpZGViYXIgSUQgd2l0aCBpZnJhbWVcbiAgICBjb25zdCBzaWRlYmFySWZyYW1lSW5Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ZpYmV3cml0ZS1zaWRlYmFyIGlmcmFtZVwiKTtcbiAgICBpZiAoc2lkZWJhcklmcmFtZUluQ29udGFpbmVyID09PSBudWxsIHx8IHNpZGViYXJJZnJhbWVJbkNvbnRhaW5lciA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2lkZWJhcklmcmFtZUluQ29udGFpbmVyLmNvbnRlbnRXaW5kb3cpIHtcbiAgICAgICAgZGVidWdMb2coXCJGb3VuZCBpZnJhbWUgaW5zaWRlIHNpZGViYXIgY29udGFpbmVyLCBwb3N0aW5nIG1lc3NhZ2VcIik7XG4gICAgICAgIHNpZGViYXJJZnJhbWVJbkNvbnRhaW5lci5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKG1lc3NhZ2UsIFwiKlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBUaGVuIHRyeSB0aGUgc2lkZWJhciBjb250YWluZXIgaXRzZWxmXG4gICAgY29uc3Qgc2lkZWJhckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdmliZXdyaXRlLXNpZGViYXJcIik7XG4gICAgaWYgKHNpZGViYXJDb250YWluZXIgPT09IG51bGwgfHwgc2lkZWJhckNvbnRhaW5lciA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2lkZWJhckNvbnRhaW5lci5jb250ZW50V2luZG93KSB7XG4gICAgICAgIGRlYnVnTG9nKFwiRm91bmQgc2lkZWJhciBjb250YWluZXIgd2l0aCBjb250ZW50V2luZG93LCBwb3N0aW5nIG1lc3NhZ2VcIik7XG4gICAgICAgIHNpZGViYXJDb250YWluZXIuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShtZXNzYWdlLCBcIipcIik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gVHJ5IGZhbGxiYWNrIHNlbGVjdG9yc1xuICAgIGNvbnN0IGZhbGxiYWNrU2VsZWN0b3JzID0gW1xuICAgICAgICBcIi52aWJld3JpdGUtc2lkZWJhci1jb250YWluZXIgaWZyYW1lXCIsXG4gICAgICAgIFwiLnZpYmV3cml0ZS1zaWRlYmFyXCIsXG4gICAgICAgIFwiaWZyYW1lW3NyYyo9J3NpZGViYXIuaHRtbCddXCIsXG4gICAgICAgIFwiaWZyYW1lXCIsIC8vIExhc3QgcmVzb3J0LCB0cnkgYW55IGlmcmFtZVxuICAgIF07XG4gICAgZm9yIChjb25zdCBzZWxlY3RvciBvZiBmYWxsYmFja1NlbGVjdG9ycykge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgIGlmIChlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVsZW1lbnQuY29udGVudFdpbmRvdykge1xuICAgICAgICAgICAgZGVidWdMb2coYEZvdW5kIGVsZW1lbnQgdXNpbmcgZmFsbGJhY2sgc2VsZWN0b3IgXCIke3NlbGVjdG9yfVwiLCBwb3N0aW5nIG1lc3NhZ2VgKTtcbiAgICAgICAgICAgIGVsZW1lbnQuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShtZXNzYWdlLCBcIipcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gSWYgYWxsIGVsc2UgZmFpbHMsIGJyb2FkY2FzdCB0byBhbGwgcG90ZW50aWFsIHdpbmRvd3NcbiAgICBkZWJ1Z0xvZyhcIkNvdWxkIG5vdCBmaW5kIHNpZGViYXIgaWZyYW1lLCBicm9hZGNhc3RpbmcgbWVzc2FnZVwiKTtcbiAgICAvLyBUcnkgcGFyZW50IGFuZCB0b3Agd2luZG93cyBhcyBsYXN0IHJlc29ydFxuICAgIGlmICh3aW5kb3cucGFyZW50ICYmIHdpbmRvdy5wYXJlbnQgIT09IHdpbmRvdykge1xuICAgICAgICBkZWJ1Z0xvZyhcIkJyb2FkY2FzdGluZyBtZXNzYWdlIHRvIHBhcmVudCB3aW5kb3dcIik7XG4gICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UobWVzc2FnZSwgXCIqXCIpO1xuICAgIH1cbiAgICBpZiAod2luZG93LnRvcCAmJiB3aW5kb3cudG9wICE9PSB3aW5kb3cgJiYgd2luZG93LnRvcCAhPT0gd2luZG93LnBhcmVudCkge1xuICAgICAgICBkZWJ1Z0xvZyhcIkJyb2FkY2FzdGluZyBtZXNzYWdlIHRvIHRvcCB3aW5kb3dcIik7XG4gICAgICAgIHdpbmRvdy50b3AucG9zdE1lc3NhZ2UobWVzc2FnZSwgXCIqXCIpO1xuICAgIH1cbiAgICBkZWJ1Z0xvZyhcIkNvdWxkIG5vdCBmaW5kIGFueSBzdWl0YWJsZSB0YXJnZXQgZm9yIG1lc3NhZ2VcIik7XG59XG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gd2FpdCBmb3IgYW4gZWxlbWVudCB0byBiZSBwcmVzZW50IGluIHRoZSBET01cbmZ1bmN0aW9uIHdhaXRGb3JFbGVtZW50KHNlbGVjdG9yLCB0aW1lb3V0ID0gMTAwMDApIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBmdW5jdGlvbiBjaGVja0VsZW1lbnQoKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChEYXRlLm5vdygpIC0gc3RhcnRUaW1lID4gdGltZW91dCkge1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFRpbWVvdXQgd2FpdGluZyBmb3IgZWxlbWVudDogJHtzZWxlY3Rvcn1gKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGNoZWNrRWxlbWVudCwgMTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjaGVja0VsZW1lbnQoKTtcbiAgICB9KTtcbn1cbi8vIEhlbHBlciBmdW5jdGlvbiBmb3IgZW5oYW5jZWQgZGVidWcgbG9nZ2luZ1xuZnVuY3Rpb24gZGVidWdMb2coY29udGV4dCwgLi4uYXJncykge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgxMSwgMTkpOyAvLyBISDpNTTpTU1xuICAgIGNvbnNvbGUubG9nKGBbVmliZVdyaXRlIERlYnVnICR7dGltZXN0YW1wfV0gJHtjb250ZXh0fTpgLCAuLi5hcmdzKTtcbiAgICAvLyBBbHNvIGxvZyBET00gc3RhdGUgZm9yIGRlYnVnZ2luZ1xuICAgIGlmIChjb250ZXh0LmluY2x1ZGVzKFwiZG9jdW1lbnQgY29udGVudFwiKSkge1xuICAgICAgICBsb2dET01TdGF0ZSgpO1xuICAgIH1cbn1cbi8vIExvZyB0aGUgY3VycmVudCBET00gc3RhdGUgZm9yIGRlYnVnZ2luZ1xuZnVuY3Rpb24gbG9nRE9NU3RhdGUoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gTG9nIERPTSBzdHJ1Y3R1cmUgaW5mb3JtYXRpb25cbiAgICAgICAgY29uc3Qgc2lkZWJhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ZpYmV3cml0ZS1zaWRlYmFyXCIpO1xuICAgICAgICBjb25zdCBzaWRlYmFySWZyYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN2aWJld3JpdGUtc2lkZWJhciBpZnJhbWVcIik7XG4gICAgICAgIGNvbnN0IHBhcmFncmFwaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmtpeC1wYXJhZ3JhcGhyZW5kZXJlclwiKTtcbiAgICAgICAgZGVidWdMb2coXCJET00gU3RhdGVcIiwge1xuICAgICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZixcbiAgICAgICAgICAgIGlzR29vZ2xlRG9jczogd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSBcImRvY3MuZ29vZ2xlLmNvbVwiLFxuICAgICAgICAgICAgc2lkZWJhckV4aXN0czogISFzaWRlYmFyRWxlbWVudCxcbiAgICAgICAgICAgIHNpZGViYXJJZnJhbWVFeGlzdHM6ICEhc2lkZWJhcklmcmFtZSxcbiAgICAgICAgICAgIHBhcmFncmFwaENvdW50OiBwYXJhZ3JhcGhzLmxlbmd0aCxcbiAgICAgICAgICAgIGJvZHlDaGlsZENvdW50OiBkb2N1bWVudC5ib2R5LmNoaWxkRWxlbWVudENvdW50LFxuICAgICAgICAgICAgaGFzRWRpdG9yRWxlbWVudDogISFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRvY3MtZWRpdG9yLWNvbnRhaW5lclwiKSxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIENoZWNrIGlmIGFueSBjb250ZW50IHJldHJpZXZhbCBtZXRob2Qgd29ya3NcbiAgICAgICAgY29uc3Qgc3RhbmRhcmRDb250ZW50ID0gR29vZ2xlRG9jc0FQSS5nZXREb2N1bWVudENvbnRlbnQoKTtcbiAgICAgICAgY29uc3QgZm9yY2VkQ29udGVudCA9IEdvb2dsZURvY3NBUEkuZm9yY2VHZXREb2N1bWVudENvbnRlbnQoKTtcbiAgICAgICAgZGVidWdMb2coXCJDb250ZW50IFJldHJpZXZhbCBUZXN0XCIsIHtcbiAgICAgICAgICAgIHN0YW5kYXJkQ29udGVudFdvcmtzOiAhIXN0YW5kYXJkQ29udGVudCxcbiAgICAgICAgICAgIHN0YW5kYXJkQ29udGVudExlbmd0aDogKHN0YW5kYXJkQ29udGVudCA9PT0gbnVsbCB8fCBzdGFuZGFyZENvbnRlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHN0YW5kYXJkQ29udGVudC5sZW5ndGgpIHx8IDAsXG4gICAgICAgICAgICBmb3JjZWRDb250ZW50V29ya3M6ICEhZm9yY2VkQ29udGVudCxcbiAgICAgICAgICAgIGZvcmNlZENvbnRlbnRMZW5ndGg6IChmb3JjZWRDb250ZW50ID09PSBudWxsIHx8IGZvcmNlZENvbnRlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZvcmNlZENvbnRlbnQubGVuZ3RoKSB8fCAwLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9nZ2luZyBET00gc3RhdGU6XCIsIGVycik7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkdvb2dsZURvY3NBUEkiLCJzdGFydERlYnVnTG9nZ2luZyIsInRoaXMiLCJkZWJ1Z0ludGVydmFsIiwiY29uc29sZSIsImxvZyIsIndpbmRvdyIsInNldEludGVydmFsIiwiX2EiLCJub3ciLCJEYXRlIiwibGFzdERlYnVnVGltZSIsImlzSW5Eb2NzIiwiaXNJbkdvb2dsZURvY3MiLCJwYXJhZ3JhcGhzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwiZmlyc3RQYXJhIiwidGV4dENvbnRlbnQiLCJzdWJzdHJpbmciLCJzdG9wRGVidWdMb2dnaW5nIiwiY2xlYXJJbnRlcnZhbCIsImxvY2F0aW9uIiwiaG9zdG5hbWUiLCJxdWVyeVNlbGVjdG9yIiwiZXJyb3IiLCJnZXREb2N1bWVudENvbnRlbnQiLCJtYXhSZXRyaWVzIiwiYWx0ZXJuYXRpdmVzIiwic2VsZWN0b3IiLCJlbGVtZW50cyIsImNvbnRlbnQiLCJBcnJheSIsImZyb20iLCJtYXAiLCJlbGVtZW50IiwiZmlsdGVyIiwiQm9vbGVhbiIsImpvaW4iLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJkb2N1bWVudENvbnRlbnQiLCJ3YXJuIiwiZm9yY2VHZXREb2N1bWVudENvbnRlbnQiLCJzY3JpcHRFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsInJlbW92ZUNoaWxkIiwiZXh0cmFjdGVkQ29udGVudCIsInZpYmVXcml0ZUV4dHJhY3RlZENvbnRlbnQiLCJlIiwic2VsZWN0b3JzIiwiYWxsVGV4dCIsImJvZHkiLCJnZXRTZWxlY3RlZFRleHQiLCJnZXRTZWxlY3Rpb24iLCJzZWxlY3Rpb24iLCJ0b1N0cmluZyIsImFkZENvbW1lbnQiLCJjb21tZW50VGV4dCIsImNvbW1lbnRCdXR0b24iLCJjbGljayIsIl9iIiwiY29tbWVudEJveCIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIkhUTUxUZXh0QXJlYUVsZW1lbnQiLCJwcm90b3R5cGUiLCJzZXQiLCJjYWxsIiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50IiwiYnViYmxlcyIsImNvbW1lbnRTdWJtaXRCdXR0b24iLCJmaW5kIiwiYnV0dG9uIiwiaXNHb29nbGVEb2NzVXJsIiwidXJsIiwic3RhcnRzV2l0aCIsImdldERvY3VtZW50VGl0bGUiLCJ0aXRsZUVsZW1lbnQiLCJhZGRWaWJlV3JpdGVVSSIsInNpZGViYXJDb250YWluZXIiLCJjbGFzc05hbWUiLCJpZCIsImRlYnVnTG9nIiwicGFyZW50RWxlbWVudCIsInRhZ05hbWUiLCJzaWRlYmFySWZyYW1lIiwic3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsImJvcmRlciIsImFsbG93Iiwic3JjIiwiY2hyb21lIiwicnVudGltZSIsImdldFVSTCIsInZpYmVXcml0ZVNpZGViYXJJZnJhbWUiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFzQ29udGVudFdpbmRvdyIsImNvbnRlbnRXaW5kb3ciLCJyZWFkeVN0YXRlIiwiY29udGVudERvY3VtZW50IiwicG9zdE1lc3NhZ2UiLCJ0eXBlIiwidG9vbGJhckNvbnRhaW5lciIsInZpYmVXcml0ZVRvb2xiYXIiLCJkaXNwbGF5IiwiYWxpZ25JdGVtcyIsInRvZ2dsZVNpZGViYXJCdXR0b24iLCJiYWNrZ3JvdW5kQ29sb3IiLCJjb2xvciIsInBhZGRpbmciLCJib3JkZXJSYWRpdXMiLCJjdXJzb3IiLCJtYXJnaW5SaWdodCIsInRvZ2dsZVNpZGViYXIiLCJhbmFseXplQnV0dG9uIiwiYW5hbHl6ZURvY3VtZW50IiwiZmVlZGJhY2tCdXR0b24iLCJhZGRGZWVkYmFjayIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJzaWRlYmFyIiwiZ2V0RWxlbWVudEJ5SWQiLCJhbGVydCIsImlzQ3VycmVudGx5T3BlbiIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwidG9nZ2xlIiwib2Zmc2V0SGVpZ2h0Iiwic2lkZWJhckVsZW1lbnQiLCJhZGQiLCJzb3VyY2UiLCJzZW5kTWVzc2FnZSIsInNlbGVjdGVkVGV4dCIsInBheWxvYWQiLCJtZXNzYWdlIiwicG9zdE1lc3NhZ2VUb1NpZGViYXIiLCJzaWRlYmFySWZyYW1lSW5Db250YWluZXIiLCJmYWxsYmFja1NlbGVjdG9ycyIsInBhcmVudCIsInRvcCIsImNvbnRleHQiLCJhcmdzIiwidGltZXN0YW1wIiwidG9JU09TdHJpbmciLCJzbGljZSIsImluY2x1ZGVzIiwiaHJlZiIsImlzR29vZ2xlRG9jcyIsInNpZGViYXJFeGlzdHMiLCJzaWRlYmFySWZyYW1lRXhpc3RzIiwicGFyYWdyYXBoQ291bnQiLCJib2R5Q2hpbGRDb3VudCIsImNoaWxkRWxlbWVudENvdW50IiwiaGFzRWRpdG9yRWxlbWVudCIsInN0YW5kYXJkQ29udGVudCIsImZvcmNlZENvbnRlbnQiLCJzdGFuZGFyZENvbnRlbnRXb3JrcyIsInN0YW5kYXJkQ29udGVudExlbmd0aCIsImZvcmNlZENvbnRlbnRXb3JrcyIsImZvcmNlZENvbnRlbnRMZW5ndGgiLCJlcnIiLCJsb2dET01TdGF0ZSIsInZpYmVXcml0ZUluamVjdGVkIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJnZW5lcmF0b3IiLCJ0aW1lb3V0IiwicmVqZWN0Iiwic3RhcnRUaW1lIiwiY2hlY2tFbGVtZW50IiwiRXJyb3IiLCJ3YWl0Rm9yRWxlbWVudCIsImNoZWNrQ291bnQiLCJjaGVja0ludGVydmFsIiwic3RhcnREb2N1bWVudE1vbml0b3JpbmciLCJvbk1lc3NhZ2UiLCJhZGRMaXN0ZW5lciIsInNlbmRlciIsInNlbmRSZXNwb25zZSIsInN1Y2Nlc3MiLCJkYXRhIiwidW5kZWZpbmVkIiwiY29udGVudExlbmd0aCIsImV2ZW50IiwiZW1lcmdlbmN5Q29udGVudCIsInRleHQiLCJQIiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsInJlamVjdGVkIiwicmVzdWx0IiwiZG9uZSIsInRoZW4iLCJhcHBseSJdLCJzb3VyY2VSb290IjoiIn0=